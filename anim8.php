<?php/*Plugin Name: Anim8Plugin URI: http://businessonmarketst.comDescription: This is an animated slider with tons of great options.Version: 1.1Author: Nicholas Koskowski, Business on Market St.Author URI: http://businessonmarketst.comLicense: GPL*///API Inclusion and Maint.ini_set('allow_url_include', 1);define('API_URL', plugins_url('/anim8/API/'));define('API_DIR', dirname(__FILE__) . '/API/');require_once API_DIR. '/meta-box.php';require_once dirname(__FILE__) . '/plugin-options.php';include dirname(__FILE__) . '/backbone.php';/* Create Options Page */function anim8_options_init() {    register_setting('anim8_options', 'anim8_theme_options', 'anim8_options_validate');}function anim8_options_add_page() {    add_menu_page(__('Anim8 Options', 'anim8'), __('Homepage Manager', 'anim8'), 'edit_theme_options', 'anim8_theme_options', 'anim8_options_do_page');}add_action('admin_init', 'anim8_options_init');add_action('admin_menu', 'anim8_options_add_page');//Post Type Creationfunction anim8_create_post_type() {    register_post_type('anim8Slides', array(        'labels' => array(            'name' => __('Anim8 Slides'),            'singular_name' => __('Slides')            ),        'public' => true,        'has_archive' => true,        'rewrite' => array('slug' => 'Slides'),        'supports' => array( 'title'),        )    );}add_action('init', 'anim8_create_post_type');//Script and Style Injectionfunction anim8_enqueue_style() {	wp_enqueue_style('myscript', plugins_url('/anim8/anim8.css')); }function anim8_enqueue_script() {    wp_enqueue_script( 'jquery' );    wp_enqueue_script('myscript', plugins_url('/anim8/anim8.js')); }add_action( 'init', 'anim8_enqueue_style' );add_action( 'init', 'anim8_enqueue_script' );// ShortCode Handlerfunction Anim8Display() {    echo '<div class="slider">';    echo '<ul>';    $featuredPosts = new WP_Query();    $featuredPosts->query(array('post_type' => 'anim8Slides', 'posts_per_page' => -1));    while ($featuredPosts->have_posts()) : $featuredPosts->the_post();    //Background Image handler    global $wpdb;    $images = get_post_meta(get_the_ID(), 'background-image', false);    $images = implode(',', $images);                    // Re-arrange images with 'menu_order'    $images = $wpdb->get_col("       SELECT ID FROM {$wpdb->posts}       WHERE post_type = 'attachment'       AND ID in ({$images})       ORDER BY menu_order ASC       ");    foreach ($images as $att) {                        // Get image's source based on size, can be 'thumbnail', 'medium', 'large', 'full' or registed post thumbnails sizes        $src = wp_get_attachment_image_src($att, 'full');        $src = $src[0];    //Display Subroutine        echo "<li class='slide'>";        echo '<img src="'.$src.'">:';        echo '</li>';    }    endwhile;     echo '</ul>';    echo '</div>';}add_shortcode('Anim8', 'Anim8Display');?>